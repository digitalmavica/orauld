buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.github.jengelman.gradle.plugins:shadow:2.0.1'
    }
}

apply plugin: 'com.github.johnrengelman.shadow'
apply plugin: 'java'
sourceCompatibility = 1.8

repositories {
    jcenter()
}

dependencies {
    compile 'com.conversantmedia:disruptor:1.2.10'
    compile files('lib/ojdbc14.jar')
}

shadowJar {
   mergeServiceFiles()
   baseName = 'orauld'
   classifier = null
}

task copyProperties(type: Copy) {
    from('src/main/java') {
        include '**/*.properties'
    }
    into 'build/classes/java/main'
}

jar {
    manifest {
        attributes 'Main-Class': 'github.peihanw.orauld.OrauldMain'
    }
}

build.dependsOn copyProperties
build.dependsOn shadowJar
